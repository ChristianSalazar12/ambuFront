<div class="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-700 p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-white mb-2">Gestión de Paramédicos</h1>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Left Panel - Form and Actions -->
            <div class="lg:col-span-2 space-y-6">

                <!-- Action Buttons -->
                <div class="flex flex-wrap gap-4">
                    <button
                        class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                        (click)="agregarParametrico()">
                        <i class="pi pi-plus text-sm"></i>
                        <span class="font-medium">Agregar</span>
                    </button>

                    <button
                        class="flex items-center gap-2 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                        [disabled]="!paramedicoSeleccionado" [class.opacity-50]="!paramedicoSeleccionado"
                        [class.cursor-not-allowed]="!paramedicoSeleccionado" (click)="editarParametrico()">
                        <i class="pi pi-pencil text-sm"></i>
                        <span class="font-medium">Editar</span>
                    </button>

                    <button
                        class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                        (click)="mostrarFiltros = !mostrarFiltros">
                        <i class="pi pi-filter text-sm"></i>
                        <span class="font-medium">Filtrar</span>
                    </button>

                    <button
                        class="flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                        [disabled]="!paramedicoSeleccionado" [class.opacity-50]="!paramedicoSeleccionado"
                        [class.cursor-not-allowed]="!paramedicoSeleccionado" (click)="eliminarParametrico()">
                        <i class="pi pi-trash text-sm"></i>
                        <span class="font-medium">Eliminar</span>
                    </button>
                </div>

                <!-- Filters Section -->
                <div *ngIf="mostrarFiltros" class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                    <h3 class="text-white text-lg font-semibold mb-4">Filtros de Búsqueda</h3>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Nombre -->
                        <div class="space-y-2">
                            <label class="text-white dark:text-sky-400/100 text-sm font-medium">Nombre</label>
                            <input type="text" pInputText [(ngModel)]="filtros.nombre"
                                class="w-full bg-white/90 border border-gray-300 rounded-lg px-3 py-2 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Ingrese nombre">
                        </div>

                        <!-- Apellido -->
                        <div class="space-y-2">
                            <label class="text-white text-sm font-medium">Apellido</label>
                            <input type="text" pInputText [(ngModel)]="filtros.apellido"
                                class="w-full bg-white/90 border border-gray-300 rounded-lg px-3 py-2 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Ingrese apellido">
                        </div>

                        <!-- Documento -->
                        <div class="space-y-2">
                            <label class="text-white text-sm font-medium">Documento</label>
                            <input type="text" pInputText [(ngModel)]="filtros.documento"
                                class="w-full bg-white/90 border border-gray-300 rounded-lg px-3 py-2 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Ingrese documento">
                        </div>

                        <!-- Tipo de Médico -->
                        <div class="space-y-2">
                            <label class="text-white text-sm font-medium">Tipo de Médico</label>
                            <p-dropdown [options]="tiposMedico" [(ngModel)]="filtros.tipoMedico" optionLabel="label"
                                optionValue="value" placeholder="Seleccione tipo"
                                styleClass="w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                [panelStyle]="{'background-color': 'white', 'border': '1px solid #d1d5db', 'border-radius': '0.5rem', 'box-shadow': '0 10px 15px -3px rgba(0, 0, 0, 0.1)'}"
                                dropdownIcon="pi pi-chevron-down">
                                <ng-template let-item pTemplate="item">
                                    <div class="flex items-center p-2 hover:bg-blue-50 bg-white w-full">
                                        <span class="ml-2 text-gray-700">{{item.label}}</span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                        </div>

                        <!-- Número Cirujano -->
                        <div class="space-y-2">
                            <label class="text-white text-sm font-medium">Nº Cirujano</label>
                            <input type="text" pInputText [(ngModel)]="filtros.numeroCirujano"
                                class="w-full bg-white/90 border border-gray-300 rounded-lg px-3 py-2 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Ingrese número">
                        </div>

                        <!-- ID Capacitación -->
                        <div class="space-y-2">
                            <label class="text-white text-sm font-medium">ID Capacitación</label>
                            <input type="text" pInputText [(ngModel)]="filtros.idCapacitacion"
                                class="w-full bg-white/90 border border-gray-300 rounded-lg px-3 py-2 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="Ingrese ID">
                        </div>
                    </div>

                    <!-- Filter Actions -->
                    <div class="flex gap-3 mt-6">
                        <button
                            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                            (click)="aplicarFiltros()">
                            Aplicar Filtros
                        </button>
                        <button
                            class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                            (click)="limpiarFiltros()">
                            Limpiar
                        </button>
                    </div>
                </div>

                <!-- Data Table -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl border border-white/20 overflow-hidden">
                    <p-table [value]="paramedicos" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
                        currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
                        [rowsPerPageOptions]="[10, 25, 50]" selectionMode="single"
                        [(selection)]="paramedicoSeleccionado" dataKey="id" class="custom-table">

                        <ng-template pTemplate="header">
                            <tr class="bg-blue-900/50">
                                <th class="text-white p-3 text-center w-16">
                                    <i class="pi pi-check-square text-sm"></i>
                                </th>
                                <th class="text-white p-3 text-left">Nombre</th>
                                <th class="text-white p-3 text-left">Apellido</th>
                                <th class="text-white p-3 text-left">Documento</th>
                                <th class="text-white p-3 text-left">Tipo Médico</th>
                                <th class="text-white p-3 text-left">Nº Cirujano</th>
                                <th class="text-white p-3 text-left">ID Capacitación</th>
                                <th class="text-white p-3 text-center">Acciones</th>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-paramedico>
                            <tr class="hover:bg-white/5 transition-colors duration-200 border-b border-white/10"
                                [ngClass]="{'bg-blue-900 bg-opacity-20': paramedicoSeleccionado?.id === paramedico.id}">
                                <td class="p-3 text-center">
                                    <input type="radio" name="paramedicoSelection" [value]="paramedico.id"
                                        [checked]="paramedicoSeleccionado?.id === paramedico.id"
                                        (change)="paramedicoSeleccionado = paramedico"
                                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                                </td>
                                <td class="text-white p-3">{{paramedico.nombre}}</td>
                                <td class="text-white p-3">{{paramedico.apellido}}</td>
                                <td class="text-white p-3">{{paramedico.documento}}</td>
                                <td class="text-white p-3">{{paramedico.tipoMedico}}</td>
                                <td class="text-white p-3">{{paramedico.numeroCirujano}}</td>
                                <td class="text-white p-3">{{paramedico.idCapacitacion}}</td>
                                <td class="p-3 text-center">
                                    <div class="flex justify-center gap-2">
                                        <button
                                            class="bg-yellow-600 hover:bg-yellow-700 text-white p-2 rounded-lg transition-colors duration-200"
                                            (click)="editarParametrico(paramedico)" pTooltip="Editar">
                                            <i class="pi pi-pencil text-xs"></i>
                                        </button>
                                        <button
                                            class="bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition-colors duration-200"
                                            (click)="eliminarParametrico(paramedico)" pTooltip="Eliminar">
                                            <i class="pi pi-trash text-xs"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>


            </div>

            <!-- Right Panel - Photo and Details -->
            <div class="space-y-6">
                <!-- Photo Section -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                    <h3 class="text-white text-lg font-semibold mb-4">Fotografía</h3>

                    <div
                        class="aspect-square bg-white/20 rounded-xl border-2 border-dashed border-white/30 flex items-center justify-center mb-4">
                        <div *ngIf="!fotoSeleccionada" class="text-center">
                            <i class="pi pi-camera text-white/60 text-4xl mb-2"></i>
                            <p class="text-white/60 text-sm">foto</p>
                        </div>
                        <img *ngIf="fotoSeleccionada" [src]="fotoSeleccionada"
                            class="w-full h-full object-cover rounded-xl">
                    </div>

                    <div class="space-y-3">
                        <p-fileUpload mode="basic" name="foto" accept="image/*" [maxFileSize]="1000000"
                            chooseLabel="Seleccionar Foto" class="w-full" (onSelect)="onFotoSelect($event)">
                        </p-fileUpload>

                        <button *ngIf="fotoSeleccionada"
                            class="w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg transition-colors duration-200"
                            (click)="eliminarFoto()">
                            Eliminar Foto
                        </button>
                    </div>
                </div>

                <!-- Additional Info -->
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                    <h3 class="text-white text-lg font-semibold mb-4">Información Adicional</h3>

                    <div *ngIf="paramedicoSeleccionado" class="space-y-3">
                        <div>
                            <label class="text-white/80 text-sm">Estado:</label>
                            <p class="text-white font-medium">{{paramedicoSeleccionado.estado || 'Activo'}}</p>
                        </div>

                        <div>
                            <label class="text-white/80 text-sm">Fecha Registro:</label>
                            <p class="text-white font-medium">{{paramedicoSeleccionado.fechaRegistro || 'No
                                disponible'}}</p>
                        </div>

                        <div>
                            <label class="text-white/80 text-sm">Última Actualización:</label>
                            <p class="text-white font-medium">{{paramedicoSeleccionado.ultimaActualizacion || 'No
                                disponible'}}</p>
                        </div>
                    </div>

                    <div *ngIf="!paramedicoSeleccionado" class="text-center text-white/60">
                        <p>Seleccione un paramédico para ver detalles</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Dialog para Agregar/Editar -->
<p-dialog [(visible)]="mostrarDialog" [modal]="true" [closable]="true" [draggable]="false" [resizable]="false"
    styleClass="custom-dialog" [style]="{width: '600px'}">

    <ng-template pTemplate="header">
        <h2 class="text-xl font-semibold">{{modoEdicion ? 'Editar' : 'Agregar'}} Paramédico</h2>
    </ng-template>

    <div class="space-y-4 p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium mb-2">Nombre *</label>
                <input type="text" pInputText [(ngModel)]="paramedicoForm.nombre" class="w-full"
                    placeholder="Ingrese nombre">
            </div>

            <div>
                <label class="block text-sm font-medium mb-2">Apellido *</label>
                <input type="text" pInputText [(ngModel)]="paramedicoForm.apellido" class="w-full"
                    placeholder="Ingrese apellido">
            </div>

            <div>
                <label class="block text-sm font-medium mb-2">Documento *</label>
                <input type="text" pInputText [(ngModel)]="paramedicoForm.documento" class="w-full"
                    placeholder="Ingrese documento">
            </div>

            <div>
                <label class="block text-sm font-medium mb-2">Tipo de Médico *</label>
                <p-dropdown [options]="tiposMedico" [(ngModel)]="paramedicoForm.tipoMedico" optionLabel="label"
                    optionValue="value" placeholder="Seleccione tipo" class="w-full"
                    [panelStyle]="{'background-color': 'white', 'border': '1px solid #d1d5db', 'border-radius': '0.375rem', 'box-shadow': '0 10px 15px -3px rgba(0, 0, 0, 0.1)'}">
                    <ng-template let-item pTemplate="item">
                        <div class="flex items-center p-2 hover:bg-gray-50 bg-white w-full">
                            <span class="text-gray-700">{{item.label}}</span>
                        </div>
                    </ng-template>
                </p-dropdown>
            </div>

            <div>
                <label class="block text-sm font-medium mb-2">Nº Cirujano</label>
                <input type="text" pInputText [(ngModel)]="paramedicoForm.numeroCirujano" class="w-full"
                    placeholder="Ingrese número">
            </div>

            <div>
                <label class="block text-sm font-medium mb-2">ID Capacitación</label>
                <input type="text" pInputText [(ngModel)]="paramedicoForm.idCapacitacion" class="w-full"
                    placeholder="Ingrese ID">
            </div>
        </div>
    </div>

    <ng-template pTemplate="footer">
        <div class="flex justify-end gap-3">
            <button class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                (click)="cancelarDialog()">
                Cancelar
            </button>
            <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200"
                (click)="guardarParametrico()">
                {{modoEdicion ? 'Actualizar' : 'Guardar'}}
            </button>
        </div>
    </ng-template>
</p-dialog>